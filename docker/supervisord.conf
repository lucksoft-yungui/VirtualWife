[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisord.log

[program:backend]
directory=/app/domain-chatbot
command=/usr/local/bin/start-backend.sh
autostart=true
autorestart=true
stdout_logfile=/var/log/backend.log
stderr_logfile=/var/log/backend.err.log

[program:frontend]
directory=/app/domain-chatvrm
command=npm run start -- --hostname 0.0.0.0 --port 3000
autostart=true
autorestart=true
stdout_logfile=/var/log/frontend.log
stderr_logfile=/var/log/frontend.err.log

[program:nginx]
# 确保日志目录存在（挂载 /var/log 时需要）
command=/bin/sh -c "mkdir -p /var/log/nginx && /usr/sbin/nginx -g 'daemon off;'"
autostart=true
autorestart=true
stdout_logfile=/var/log/nginx.log
stderr_logfile=/var/log/nginx.err.log
